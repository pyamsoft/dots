title   Arch Linux
linux   /vmlinuz-linux
initrd  /amd-ucode.img
initrd  /initramfs-linux.img

# encrypted root
options cryptdevice=UUID=6a00a536-5e03-4205-bf15-577f8191179c:cryptoroot:allow-discards
options root=/dev/mapper/cryptoroot rw kaslr

# No watchdog
options nmi_watchdog=0 nowatchdog

# Disable ipv6
options ipv6.disable=1 ipv6.ipv6_disable=1

# disable auditing, makes iptables calls super slow
options audit=0

# Weird screen issues, suspend breaks
# May want to turn off DC
options amdgpu.dc=1

# Disable old deprecated vsyscalls
options vsyscall=none

# AMDGPU feature unlocking (may be unstable)
options amdgpu.ppfeaturemask=0xffffffff

# Kernel Module Signature validation
options module.sig_enforce=1

# This option randomizes page allocator freelists, improving security
# by making page allocations less predictable. This also improves performance.
options page_alloc.shuffle=1

# This enables Kernel Page Table Isolation which mitigates Meltdown and prevents some KASLR bypasses.
options pti=on

# If you see PCIe Bus Error: severity=Corrected, type=Data Link Layer, id=000b(Receiver ID)
options pci=nommconf

# This disables slab merging which significantly increases the difficulty
# of heap exploitation by preventing overwriting objects from merged caches
# and by making it harder to influence slab cache layout.
#
# May affect performance.
#
# options slab_nomerge slub_debug=FZ

# This enables zeroing of memory during allocation and free time which
# can help mitigate use-after-free vulnerabilities and erase sensitive
# information in memory.
#
# May affect performance.
#
# options init_on_alloc=1 init_on_free=1
