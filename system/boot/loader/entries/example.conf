title   Arch Linux
linux   /vmlinuz-linux
initrd  /amd-ucode.img
initrd  /initramfs-linux.img

# encrypted root
options cryptdevice=UUID=6a00a536-5e03-4205-bf15-577f8191179c:cryptoroot:allow-discards
options root=/dev/mapper/cryptoroot rw kaslr

# ACPI
options acpi_osi=Linux

# No watchdog
options nmi_watchdog=0 nowatchdog

# Disable ipv6
options ipv6.disable=1 ipv6.ipv6_disable=1

# disable auditing, makes iptables calls super slow
options audit=0

# Weird screen issues, suspend breaks
# May want to turn off DC
options amdgpu.dc=1

# Disable old deprecated vsyscalls
options vsyscall=none

# Kernel Module Signature validation
options module.sig_enforce=1

# If you see PCIe Bus Error: severity=Corrected, type=Data Link Layer, id=000b(Receiver ID)
# https://unix.stackexchange.com/questions/327730/what-causes-this-pcieport-00000003-0-pcie-bus-error-aer-bad-tlp
options pci=nommconf

# Enable MSR writing for `adjust-ryzen` so we can undervolt
options msr.allow_writes=on

# Turn of hardware mitigations as it slows things down
options mitigations=off

# AMDGPU feature unlocking (may be unstable)
#
# May affect stability.
#
options amdgpu.ppfeaturemask=0xffffffff

# This disables slab merging which significantly increases the difficulty
# of heap exploitation by preventing overwriting objects from merged caches
# and by making it harder to influence slab cache layout.
#
# May affect performance.
#
# options slab_nomerge slub_debug=FZ

# This enables zeroing of memory during allocation and free time which
# can help mitigate use-after-free vulnerabilities and erase sensitive
# information in memory.
#
# May affect performance.
#
# options init_on_alloc=1 init_on_free=1
