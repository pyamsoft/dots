# If we have already been sourced, exit out
if [ -n "${PYAMSOFT_ENVIRONMENT}" ]; then
  exit 0
fi

# Keep the original PATH before we toutch it
export SYSTEM_DEFAULT_PATH="${PATH}"

# Git tracked scripts
PATH="${HOME}/bin:${PATH}"

# Local scripts that are not git tracked
PATH="${HOME}/.local/bin:${PATH}"

# bubblewrap-wrap scripts
if command -v bww > /dev/null; then
  PATH="${HOME}/.bww/bin:${PATH}"
fi

# Flatpak scrips
if command -v flatpak > /dev/null; then
  PATH="${HOME}/.flatpak/bin:${PATH}"
fi

# Add local npm repository: used for things like bash-language-server
# Set the local npm global path with "npm config set prefix ~/.npm/global"
if command -v npm > /dev/null; then
  PATH="$(npm config get prefix)/bin:${PATH}"
fi

# Export the PATH
export PATH

# Define XDG directories
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="${HOME}/.cache"

# Wine with esync
# https://github.com/zfigura/wine/blob/esync/README.esync
export WINEDEBUG=-all
export WINEESYNC=1

# Launch an ssh-agent the entire user session
# Your DE may launch ssh agents for you - be sure you are not doubling up!
if [ -z "${SSH_AUTH_SOCK}" ]; then
  eval "$(ssh-agent -s)"
fi

# Mark environment as set up
export PYAMSOFT_ENVIRONMENT=1

# vim: set syntax=sh tabstop=2 softtabstop=2 shiftwidth=2 shiftround expandtab:
