#!/bin/sh

# Don't kill ourselves
readonly self_pid="$$"

killa()
{
  _process="$1"

  my_pid="$(pgrep -f "${_process}")"
  if [ -n "${my_pid}" ]; then

    clean_pids=""
    for pid in ${my_pid}; do
      if [ "${pid}" != "${self_pid}" ]; then
        clean_pids="${pid} ${clean_pids}"
      fi
    done

    if [ -n "${clean_pids}" ]; then
      printf -- 'Killing process %s\n' "${_process}" "${clean_pids}"
      # Don't quote so that multiple PIDs can be killed
      # shellcheck disable=SC2086
      kill ${clean_pids}
    fi

    unset my_pid
    unset clean_pids
  else
    printf -- '%s not running.\n' "${_process}"
  fi

  unset _process
}

killa "proton"
killa "gamescope"
