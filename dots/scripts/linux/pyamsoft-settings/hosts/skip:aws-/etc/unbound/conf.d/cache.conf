server:
  # Cache items for a minimum of 15 minutes
  cache-min-ttl: 900
  infra-host-ttl: 900

  # Cache more hosts (100k)
  infra-cache-numhosts: 100000

  # Since we are setting min-ttl, we set the
  # negative-min-ttl to 1 to honor the upstream TTL for negative
  # SOA responses
  cache-min-negative-ttl: 1

  # We also adjust the memory sizes allocated to caches from the default 4m
  msg-cache-size: 256m
  rrset-roundrobin: yes
  rrset-cache-size: 256m
  key-cache-size: 32m
  neg-cache-size: 4m

  # Serve responses from the cache even AFTER they have expired
  serve-expired: yes

  # Defaults
  #
  # When a cache entry expires, we will attempt to re-fetch it from the upstream
  # while this is happening, we can serve the expired cached response for up to 1 day
  #
  # The TTL sent to clients for the expired data is 30 seconds, so they will re-query after
  # 30 seconds
  serve-expired-ttl: 86400
  serve-expired-ttl-reset: no
  serve-expired-reply-ttl: 30

  # Immediately serve expired from the cache without waiting the default 1800ms for upstream resolution
  serve-expired-client-timeout: 0
